# epoll

epoll的两种工作模式：
- ET
- LT(默认工作方式)

## ET模式

- ET(edge-triggered)是高速工作方式，只支持no-block-socket。在这种模式下，当描述符从未就绪变为就绪时，内核通过epoll告诉你。然后它会假设你知道文件描述符已经就绪，并且不会再为那个文件描述符发送更多的就绪通知。请注意，如果一直不对这个fd作IO操作(从而导致它再次变成未就绪)，内核不会发送更多的通知(only once).
- 优点：每次内核只会通知一次，大大减少了内核资源的浪费，提高效率。
- 缺点：不能保证数据的完整。不能及时的取出所有的数据。

## LT模式
- LT(level triggered)是缺省的工作方式，并且同时支持block和no-block socket.在这种做法中，内核告诉你一个文件描述符是否就绪了，然后你可以对这个就绪的fd进行IO操作。如果你不作任何操作，内核还是会继续通知你的，所以，这种模式编程出错误可能性要小一点。传统的select/poll都是这种模型的代表．
- 优点：确保调用者能得到完整的数据。如果fd还有数据，epoll_wait就会一直返回。
- 缺点：频繁的通知，以及状态切换 内核态-->用户态