# makefile-变量

make的变量可以分为`环境变量`，`内置变量`，`自动变量`

## 2.1环境变量

- `HOME`：/home/hl
- `LANG`：zh_CN.UTF-8
- ...

makefile能访问到当前终端下的所有环境变量(通过env可以查看)

## 2.2内置变量

```
CURDIR := /home/hl 			# 记录当前路径
SHELL = /bin/sh
MAKEFILE_LIST :=  Makefile
.DEFAULT_GOAL := all
MAKEFLAGS = p
HOSTARCH := x86_64
RM = rm -f		# 删除文件程序的名称

CC = cc 		# C语言编译器的名称
CPP = $(CC) -E  # C语言预处理器的名称 $(CC) -E
CFLAGS			# C语言编译器的编译选项，无默认值
CPPFLAGS  		# C语言预处理器的编译选项，无默认值

CXX = g++       # C++语言的编译器名称
CXXFLAGS		# C++语言编译器的编译选项，无默认值
```
内置变量可以在makefile中被重新定义赋值

## 2.3自动变量

- `$*`：不包含拓展名的目标文件名称
- `$+`：所有的依赖文件,以空格分开，并以出现的先后为序，可能包含重复的依赖文件
- `$<`：第一个依赖文件的名称
- `$?`：所有的依赖文件，以空格分开，这些依赖文件的修改日期比目标的创建日期晚
- `$@`：目标的完整名称(目标：依赖项中的目标的全称)
- `$^`：所有的依赖文件，以空格分开，不包含重复的依赖文件
- `$%`：如果目标是归档成员，则该变量表示目标的归档成员名称
- `$(Q)`：如果Q是@的话，其实就是忽略很多编译信息，和kbuild有点关系